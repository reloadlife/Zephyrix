log:
  level: "debug"
  outputs: ["stdout"]

server:
  address: ":8000"
  skip_log_path:
    - "/health"
    - "/metrics"

  max_multipart_memory: 32000000 # 32MB
  read_timeout: "5s"
  write_timeout: "10s"
  idle_timeout: "120s"

  cors:
    enabled: true
    allowed_origins: ["*"]
    allowed_methods: ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
    allowed_headers: ["*"]
    exposed_headers: ["*"]
    allow_credentials: true
    max_age: 12h

  proxies:
    - name: "front-end-ui"
      address: "http://localhost:3000"
      path:
        - "/*"
      ignore_path:
        - "/api"
        - "/health"
        - "/metrics"
      headers:
        - "X-Forwarded-For"
        - "X-Forwarded-Proto"
        - "X-Forwarded-Host"
      strip_prefix: true

  # enable TLS
  # tls_enabled: true
  # tls_address: ":443"
  # tls_cert_file: "/path/to/cert.pem"
  # tls_key_file: "/path/to/key.pem"
  # tls_min_version: "1.2"
  # tls_max_version: "1.3"
  # tls_cipher_suites:
  #   - "TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256"
  #   - "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256"
  # tls_curve_preferences:
  #   - "P256"
  #   - "P384"
  # tls_client_auth: "require_and_verify_client_cert"
  # tls_client_ca_cert: "/path/to/ca_cert.pem"
  # tls_renegotiation: false

  # for Auto SSL functionality :)
  # challange server will always be started on port 80
  # make sure to have the port free and accessible if using AutoSSL
  # auto_ssl_challenge_addr: ":80"
  # auto_ssl: true
  # auto_ssl_domains:
  #   - "example.com"
  #   - "www.example.com"
  # auto_ssl_email: "admin@example.com"
  # auto_ssl_cache_dir: "/path/to/cert/cache"
  # auto_ssl_provider: "letsencrypt"  # or "zerossl"
  # # If using ZeroSSL:
  # auto_ssl_zerossl_eab_key: "your-eab-key"
  # auto_ssl_zerossl_kid: "your-kid"

database:
  # for now, it uses BeeORM under the hood.
  # and due to that, only MySQL, redis / dragonfly are supported.
  pools:
    - name: "default"
      dsn: "root:password@tcp(127.0.0.1:3306)/zephyrix?charset=utf8mb4&parseTime=True&loc=Local"
      max_open_conns: 100
      max_idle_conns: 10
      conn_max_lifetime: "1h"
      unsafe_auto_migrate: false
      default_encoding: "utf8mb4"
      default_collation: "utf8mb4_unicode_ci"
      ignored_tables:
        - "migrations"
      cache:
        enabled: true
        size: 10000
      redis:
        enabled: true
        address: "127.0.0.1:6379"
        password: ""
        username: ""
        db: 0

  seed:
    only_on_empty: true
    entities:
      - "User"
      - "Role"
      - "Permission"
      - "UserRole"
      - "RolePermission"
